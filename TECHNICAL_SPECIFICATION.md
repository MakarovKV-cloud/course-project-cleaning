# Техническое задание: система управления заявками клининговой компании

**Студент:** Макаров Кирилл Витальевич

**Группа:** 2307В2

## 1.Описание проекта
### 1.1 Название системы
Система управления заявками клининговой компании
### 1.2 Назначение
Система предназначена для создания и управления заявками на клининг

## 2 Функциональные требования
### Функции для всех пользователей
#### Функция авторизации
 **Описание** При запуске открывается окно, на котором будет 2 поля ввода (логин и пароль) и кнопка войти.
При нажатии на кнопку будет происходит сравнения значений полей с базой данных, после будет 2 путя.

  **1 путь:** найдётся совпадение с данными из БД и пользователь попадёт в систему исходя из роли.

  **2 путь:** не будет нейдено совпадений и выведтся диалоговое окно, кторое скажет, что аккаунта с такими данными не найдено или такой аккаунт ещё не существует. Будет 2 кнопки: одна просто закрое диалоговое окно даст возможность изменить содержимое полей, другая перенесёт на другую форму, где пользователь сможет создать аккаунт.

Входные данные: Логин (никнейм), Пароль

Результат:

При успехе: Пользователь перенаправляется в систему согласно своей роли. 

При неудаче: Отображается диалоговое окно с ошибкой. Пользователь может либо закрыть окно и исправить данные, либо перейти на форму регистрации.

#### Функция создания аккаунта
**Описание:** Будет несколько полей ввода: фамилия, имя, отчество, логин, пароль, повторный пароль - и кнопка создать аккаунт.
Все поля обязательны для заполнения. Когда пользователь нажмёт на кнопку создания выведется диалоговое одно из двух дивлоговых окон.

**Первое диалоговое окно** будет содержать сообщение об успешном создании и окнопкой "ОК", которая создаст объект заявки и перекинет пользователя на окно авторизации.
  
  **Второе диалоговое окно** будет содержать перечень ошибок (например, поле N не заполнено или пользователь с таким никнеймом уже найден) и кнопку "ОК", закрывающее диалоговое окно.


  Входные данные: Фамилия, имя, отчество, никнейм, пароль, повторный пароль

Результат:

При успехе: Создан объект "Аккаунт". Пользователь видит сообщение об успехе и перенаправляется на окно авторизации.

При ошибке: Отображается диалоговое окно со списком ошибок валидации (незаполненные поля, никнейм занят, пароли не совпадают). Данные формы не сохраняются, пользователь остается на странице регистрации.
### Функции для пользователей
#### Функция просмотра своих заявок
#### Функция создания заявки на клининг 
  Если после авторизация система вернёт должность "Пользователь", то выведтся окно со списком активных заявок на клининг и кнопка, которая переносит на окно создания заявки на клининг.
  На ней будет поля для ввода площади уборки, список услуг (некоторые зависят от площади), дата клининга, выпадающий список городов, где работает компания, района, адреса, поле итоговой стоимости, и кнопка "Перейти к оплате", открывающее диалоговое окно, подтвержающее, что данные верны.

Входные данные: Площадь уборки, список выбранных услуг, дата клининга, выбранный город, выбранный район, адрес.

Результат:

Промежуточный: На основе входных данных рассчитана итоговая стоимость. Открыто диалоговое окно для подтверждения корректности всех данных перед оплатой.

Финальный (после подтверждения): Пользователь перенаправляется на окно ввода платежных данных.
  #### Функция оплаты заявки
  Если пользователь нажимает на кнопку "Перейти к оплате", то его переносит на окно, куда он вводит данные
банковской карты (номер, срок действия, CVV). Система проверяет корректность данных, создаёт запись о платеже и, при успешной оплате, автоматически создать объект заявки

Входные данные: Номер банковской карты, Срок действия карты, CVV-код

Результат:

При успехе: Создана запись об успешном платеже в БД. Статус заявки изменен на "Оплачена" и создан соответствующий объект "Заявка" в системе.

При ошибке: Отображается сообщение об ошибке оплаты (некорректные данные карты, недостаточно средств). Пользователь остается на странице оплаты для повторного ввода данных.

  
#### Функция изменения аккаунтов/заявок для администратора
Если админинистратор выбирает аккаунт из списка аккаунтов, то он может нажать на кнопку "Изменить должность", которая выведет окно с выбором radiobutton и даст выбрать должность аккаунта (пользователь, клинер, администратор).
  
 Если администратор выбирает заявку из списка заявок, то он может изменить её статус ("Новая" по умолчанию), клинер (назначается вручную из списка клинеров).

 Входные данные:

Для аккаунта: Выбранный аккаунт, новая выбранная должность (роль)

Для заявки: Выбранная заявка , новый статус заявки, выбранный клинер 

Результат:

Для аккаунта: Обновлена роль выбранного пользователя в БД.

Для заявки: обновлены статус и назначенный клинер для выбранной заявки в БД.

#### Функция добавление/удаление городов
Администратор может добавить новый город, нажав кнопку добавления города и введя название города, который создаст объект в БД, или удалить, выбрав уже имеющийся из списка и нажав одноимённую кнопку, удалив город из БД.

Входные данные:

Для добавления: Название нового города.

Для удаления: выбранный город из списка.

Результат:
При добавлении: Создан новый объект "Город" в БД.

При удалении: Выбранный город удален из БД.
### Функции для клинеров